# BadAI
AI Commentary for Sim Racing

Current version is V18.06

There is no how to yet, I will make one in time. 

You will need either a Claude or Open AI API key to run this as well as an Eleven Labs API for the voice. Add these in the settings.

A very bad how to...
If you want, you can run the corner data generator file which makes a file for the app to read which corner you're on based off spline position. I usually do a practice session beforehand and get the top two or three overtaking locations. Otherwise it just makes up the names.
Then to run the actual commentator.- Start it up. With Main- When you're on the line, in the car setup phase of the race. Select the sim (Only ACC and AMS2 actually work), I haven't looked at AC in a long time.- Click 'Start'- If it's reading the data it should give you the qualifying positions and some other information (Track and maybe temp).- You can minimise it now to run in the background. - I've noticed a bug that if someone plays around with their settings for a second time within the 30 seconds leading to the race it adds a lap onto their spline position putting them in the lead.- When you're done, you should see a list of events which happened. 
- Next you need to filter that data. Before you go into the following tab though, edit the data filterer.txt file. This is the first prompt to help with getting the events to be more manageable. - So once you've done the editing of the text file (Make sure you don't touch the prompt around the return of the data in the same format), then go to the next tab. The highlight reel creation tab.- Click browse and find the file of your previous race session. It'll probably be the most recent one in the race data folder.- Then click filter data. This will send that to o1 or Claude for the filtering and will return a list of 'Highlights'. Make sure it has that initial leaderboard update as well as the race start update. It doesn't usually drop it, but once out of 50 it will.- You can now manually edit the highlights. I usually will select ones in clumps where it didn't leave enough room for the commentator (Less than 4 or so seconds). And I'll either delete one, or merge them. You can do this by right clicking.- You can also insert manual events if needed to. But, it does a pretty decent job of getting the highlights right if you have a good prompt.- I'll also in the Additional Information tab add a story plot. It makes it more focussed on developing the story arcs. - For example, I'll write, This is a GT3 sprint race at Silverstone in the LFM Go Setups Championships. Daniel Born had a mishap at the gym today. Welcome the viewer and explain the storyplot.- Once you've done any changes, you need to adjust the start time of the race with the time offset. - So go to the replay. See when the green flag is shown at the start and add that to the offset. - You'll see the Race Begins notice and all the other events move forwards to a different time. - You'll have to move any formation lap information backwards by whatever time you want. (Double click on it and add in a time).- I find it struggles with commentary longer than 12 mins, so try keep the highlights less than that. (you can add breaks by right clicking and adding a break in).- Also, you'll have to figure out how many words per second the commentator of your choosing speaks. Geoff, the default one does about 2.7.- Next you click save text file and name the file.
- Now, open up the commentary generation, select your commentator.- Select the file you just created before. - Click Generate Commentary. - This will take a little time (+- a min for 3.7 sonnet or 4.5 or longer if using o1). - This will then be displayed in the console as well as a new file being created in the race data folder.
- When that's one, go to the next tab.- Select the new file which was created, I think it'll have _commentary at the end of it.- Click Generate Voice commentary.- This will send the file in segments to ElevenLabs and will return the MP3s into the Audio Output folder.- When it goes through it once, it's supposed to go through a second time to clean up the gaps, but it's broken at the moment.
- Then you'll have your voice output.- I usually now either put the voices together in Premiere Pro, on the timeline at the correct time location (In the filname) and to make them truncate at the right time). I usually look for dips in the commentary closest to the next one.- Next export that file again. - Or you can use the MP3 combiner to combine the files too (That'll truncate the ones which go over their time).
- Then open ACC, go to the replay.- Set it to around 2 mins in. - Then open up the Race Director file. 
- Choose your combined audio file. - Choose your filtered data file.- Set the time in the Race Director to the same as the ACC replay.- Open OBS studio.- Press play on the Director. It'll give a 10 second countdown.- When it gets to zero, press play on the reply. - Then you have to select the cars about 5 to 10 seconds before the event comes up. Or if the commentator is waffling and speaks about a certain driver.- You can pause and move when there isn't much action and just line up the director again with the offset. 
- That's it.
